<div class="body_login">
    <div class="title_logo">
        <img src="/images/4.png" />
    </div>
    <form method="post" name="contactForm" onsubmit="return validateForm()" action="/register-user">
        <div class="header_login">
            <h1>Register</h1>
            <hr>
            <label for="username"></label>
            <input type="text" placeholder="Enter username" name="username" id="username">
            <label for="password"><b></b></label>
            <input type="password" id="password" placeholder="Enter password " name="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}" title="Must contain at least one number and one upper and lower case letter and at least 8 characters" required>
            <label for="password"><b></b></label>
            <input type="password" id="confirm_password" placeholder="Confirm password " name="confirm_password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}" title="Must contain at least one number and one upper and lower case letter and at least 8 characters" required>
            <p style="width: 70%; font-size:12px; text-align: left;
            color: red; font-family: Arial, Helvetica, sans-serif;margin-bottom: 10px;">
                {{messages}}</p>
            <hr>
            <button type="submit" class="submit submit_dn">Register</button>
            <div class="line">
                <hr><p style="margin: 0 10px 0 10px;">or</p>
                <hr>
            </div>
            <a class="a" href="/login-user">Login</a>
            <div class="fogot"><a href="/check-user">Forgot password?</a></div>
            <div id="message">
                <h3>The password must contain the following:</h3>
                <p id="letter" class="invalid"> One <b>lowercase</b> letter  </p>
                <p id="capital" class="invalid"> One <b>capitalization</b> letter </p>
                <p id="number" class="invalid">One <b>number</b></p>
                <p id="length" class="invalid">There are at least  <b>6 characters</b></p>
            </div>
        </div>

    </form>

</div>



<script>
    function validateForm() {
        var username = document.forms["contactForm"]["username"].value;
        // var fname = document.getElementById("fname").value;
        var password = document.forms["contactForm"]["password"].value;
        // var sname = document.getElementById("sname").value;
        var confirm_password = document.forms["contactForm"]["confirm_password"].value;
        var format = /^[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]*$/;
        const regex = /[A-Z]|\d/g; // tìm các kí tự in hoa hoặc số
        if (username == null || username == "") {
            alert("The login box cannot be left blank");
            return false;
        } else if (username.length < 6) {
            alert("The register box cannot be left blank");
            return false;
        } else if (username.length > 20) {
            alert("Account cannot be longer than 20 characters");
            return false;
        } else if (confirm_password == null || confirm_password == "" || confirm_password != password) {
            alert("Re-entered password does not match");
            return false;
        }
    }

    var myInput = document.getElementById("password");
    var myInput1 = document.getElementById("confirm_password");
    var letter = document.getElementById("letter");
    var capital = document.getElementById("capital");
    var number = document.getElementById("number");
    var length = document.getElementById("length");

    // When the user clicks on the password field, show the message box
    myInput.onfocus = function () {
        document.getElementById("message").style.display = "block";
    }

    // When the user clicks outside of the password field, hide the message box
    myInput.onblur = function () {
        document.getElementById("message").style.display = "none";
    }

    // When the user starts to type something inside the password field
    myInput.onkeyup = function () {
        // Validate lowercase letters
        var lowerCaseLetters = /[a-z]/g;
        if (myInput.value.match(lowerCaseLetters)) {
            letter.classList.remove("invalid");
            letter.classList.add("valid");
        } else {
            letter.classList.remove("valid");
            letter.classList.add("invalid");
        }

        // Validate capital letters
        var upperCaseLetters = /[A-Z]/g;
        if (myInput.value.match(upperCaseLetters)) {
            capital.classList.remove("invalid");
            capital.classList.add("valid");
        } else {
            capital.classList.remove("valid");
            capital.classList.add("invalid");
        }

        // Validate numbers
        var numbers = /[0-9]/g;
        if (myInput.value.match(numbers)) {
            number.classList.remove("invalid");
            number.classList.add("valid");
        } else {
            number.classList.remove("valid");
            number.classList.add("invalid");
        }

        // Validate length
        if (myInput.value.length >= 6) {
            length.classList.remove("invalid");
            length.classList.add("valid");
        } else {
            length.classList.remove("valid");
            length.classList.add("invalid");
        }
    }
</script>

<style>
    /* Style all input fields */
    input {
        width: 100%;
        padding: 12px;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
        margin-top: 6px;
        margin-bottom: 16px;
    }

    /* Style the submit button */
    input[type=submit] {
        background-color: #04AA6D;
        color: white;
    }


    /* The message box is shown when the user clicks on the password field */
    #message {
        display: none;
        background: #f1f1f1;
        color: #000;
        position: relative;
        padding: 20px;
        margin-top: 10px;
    }

    #message p {
        padding: 10px 35px;
        font-size: 18px;
    }

    /* Add a green text color and a checkmark when the requirements are right */
    .valid {
        width: 75%;
        text-align: start;
        color: green;
    }

    .valid:before {
        position: relative;
        left: -35px;
        content: "✔";
    }

    /* Add a red text color and an "x" when the requirements are wrong */
    .invalid {
        width: 75%;
        text-align: start;
        color: red;
    }

    .invalid:before {
        position: relative;
        left: -35px;
        content: "✖";
    }
</style>